<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Exo d'Algo - Cart !</title>
    <link href="./bootstrap.min.css" rel="stylesheet" />
    <link href="./style.css" rel="stylesheet" />
  </head>
  <body>
    <a href="index.html">← revenir à la liste des exos</a>
    <div class="card">
      <p class="h6 font-weight-bold text-center">#09 - Panier</p>
      <div class="instructions">
        <p class="text-secondary">
          Votre mission si toutefois vous l'acceptez, est de vérifier la
          concordance des mots de passes :
        </p>
        <br />
        <p class="text-secondary">
          Vous devez retourner la valeur de votre panier
        </p>
        <p class="text-secondary">
          Si je sélectionne
          <i class="text-dark">Une formation sur javascript (30€)</i> avec le
          bon code de promotion, j'obtiendrai :
        </p>
        <p class="text-success">"La valeur de votre panier est de 27€"</p>
      </div>

      <select name="article" id="articles">
        <option value="">--Sélectionner un article--</option>
        <option value="one">Une formation sur javascript (30€)</option>
        <option value="two">Deux formations sur javascript (50€)</option>
      </select>

      <label>Code de réduction (10% de réduction)</label>
      <br />
      <input type="text" id="promotion" />
      <br />
      <button type="button" class="btn btn-primary" onclick="cartValue()">
        Connaître la valeur de mon panier
      </button>
    </div>

    <script type="text/javascript">
      const VALID_PROMOTION_CODE = "10POUR100";

      //Déclaration de la fonction cartValue qui calcul et affiche la valeur du panier
      function cartValue() {
        //Récupération de la valeur des champs articles et promotion du formulaire sélectionné par l'utilisateur
        let articles = document.getElementById("articles");
        let selectedArticle = articles.options[articles.selectedIndex].value;
        let codePromo = document.getElementById("promotion");

        //Déclaration de la variable price qui contiendra le prix de l'article sélectionné
        let price;

        //Affectation d'une valeur à price selon l'article sélectionné ("one" ou "two")
        switch (selectedArticle) {
          case "one":
            price = 30;
            break;
          case "two":
            price = 50;
            break;
        }

        //Affichage de la valeur du panier selon si le code promo est utilisé ou non
        if (codePromo.value === VALID_PROMOTION_CODE) {
          price *= 0.9;
          alert("La valeur de votre panier est de " + price + "€");
        } else {
          alert("La valeur de votre panier est de " + price + "€");
        }
      }
    </script>
  </body>
</html>
